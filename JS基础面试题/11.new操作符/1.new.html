<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>new</title>
  </head>
  <body>
    <script>
      function Fun(age, name) {
        this.age = age;
        this.name = name;
      }
      function create(fn, ...args) {
        //1. 创建了一个空的对象
        var obj = {}; //var obj = Object.create({})
        //2. 将空对象的原型，指向于构造函数的原型
        Object.setPrototypeOf(obj, fn.prototype);
        //3. 将空对象作为构造函数的上下文（改变this指向）
        var result = fn.apply(obj, args);
        //4. 对构造函数有返回值的处理判断
        return result instanceof Object ? result : obj;
      }
      var obj = create(Fun, 18, "张三")
      console.log(obj);

      /* function f(age, name) {
        this.name = name
        this.age = age
      }
      function create(f, ...args) {
        var obj = {}
        Object.setPrototypeOf(obj, f.prototype)
        var result = f.apply(obj, args)
        console.log(result)
        return result

      } */
      /* const obj = Object.create({})
      console.log(obj); */
    </script>
  </body>
</html>
